<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: README</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>README</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>README
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Jan 28 16:37:49 Westeuropäische Normalzeit 2007</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h1>SimpleLocalization Plugin</h1>
<p>
This plugin supports a simple one language localization for Ruby on Rails.
It localizes the <a href="../classes/Date.html">Date</a> and <a
href="../classes/Time.html">Time</a> classes, many helpers, some methods of
ActiveSupport, the ActiveRecord error messages and provides a way to
localize models and their attributes. You&#8216;ll find an overview of all
features later in this document.
</p>
<p>
To make the plugin more felxible and extendable the functionality is split
into small &quot;features&quot;. These features are source files located in
the <tt>lib/features</tt> directory of the plugin and each one localizes a
small part of Ruby on Rails. This way you can choose the parts you want to
have localized. This also avoids conflicts in case you have already
localized some parts of your application by other means.
</p>
<p>
To support a range of languages all language specific strings are extracted
into language files. These language files can be found in the
<tt>languages</tt> directory of the plugin and are written in the YAML
format. They also contain meta data about the language files and it&#8217;s
author which can be accessed by the <a
href="../classes/ArkanisDevelopment/SimpleLocalization/Language.html#M000018">ArkanisDevelopment::SimpleLocalization::Language#about</a>
method.
</p>
<p>
Some languages my require you to write a bit Ruby stuff (eg. configuring
the Rails Inflector) which can not be done with just a YAML file. In this
case create a ruby file with the same name as the language file but with an
<tt>rb</tt> instead of an <tt>yml</tt> extension. It will be loaded right
after the YAML file.
</p>
<h2>Installation</h2>
<p>
Simply copy the plugin into your <tt>vendor/plugins</tt> directory and call
the <tt>simple_localization</tt> method at the end of your
<tt>environment.rb</tt>.
</p>
<pre>
  simple_localization :language =&gt; :de
</pre>
<p>
With this you&#8217;re done. The <tt>:language</tt> parameter lets you
define the language you want to use. Just specify the name of the language
file without the <tt>.yml</tt> extension as a symbol or string. Currently
only a german language file (named <tt>de.yml</tt>) exists though.
</p>
<h2>Features and configuration</h2>
<p>
Like said before the functionality of this plugin is split into single
features. By default all features are loaded but you can choose which
should be loaded or should not. This is also done by the
<tt>simple_localization</tt> method.
</p>
<pre>
  simple_localization :language =&gt; :de, :localized_models =&gt; false
</pre>
<p>
Simply specify the name of the feature (like the file name but without the
extension) as a parameter and set it&#8217;s value to <tt>false</tt>. The
above example loads all features except the <tt>localized_models</tt>
feature. To make the feature selection easier the
<tt>simple_localization</tt> method supports the <tt>:only</tt> and
<tt>:except</tt> parameters which are pretty much self explaining.
</p>
<pre>
  # Does the same as the first example
  simple_localization :language =&gt; :de, :except =&gt; :localized_models

  # Only loads the localized_strftime feature
  simple_localization :language =&gt; :de, :only =&gt; :localized_models
</pre>
<p>
<tt>:except</tt> and <tt>:only</tt> also accept an array of features.
</p>
<pre>
  simple_localization :language =&gt; :de, :except =&gt; [:localized_models, :localized_dates]
</pre>
<h2>Feature overview</h2>
<p>
This is just an overview of the available features. For more specify
documentation take a look at the individual feature files. You can find
these files in the <tt>lib/features</tt> directory of the plugin.
</p>
<h3>Localized model and attribute names (localized_models)</h3>
<p>
File: <tt>lib/features/localized_models.rb</tt>
</p>
<p>
Extends ActiveRecord models to provide a way to specify localized names for
models and thier attributes. Asume the following model <tt>Computer</tt>
has the attributes <tt>name</tt>, <tt>description</tt>, <tt>ip_address</tt>
and <tt>user</tt>.
</p>
<pre>
  class Computer &lt; ActiveRecord::Base
        belongs_to :user
        validates_presence_of :name, :ip_address, :user

        localized_names 'Der Computer',
          :name =&gt; 'Der Name',
          :description =&gt; 'Die Beschreibung',
          :ip_address =&gt; 'Die IP-Adresse',
          :user =&gt; 'Der Besitzer'
  end
</pre>
<p>
This stores the localized (in this case german) name of the model and
it&#8217;s attributes in the model class. The first parameter is the name
of the model followed by a hash defining the localized names for the
attributes.
</p>
<p>
The feature also overwrites ActiveRecords <tt>human_attribute_name</tt>
method to return the localized names if available. The model name can be
accessed by the class method <tt>localized_model_name</tt>.
</p>
<pre>
  Computer.localized_model_name               # =&gt; 'Der Computer'
  Computer.human_attribute_name(:ip_address)  # =&gt; 'Die IP-Adresse'
</pre>
<h3>Localized Active Record error messages (localized_error_messages)</h3>
<p>
File: <tt>lib/features/localized_error_messages.rb</tt>
</p>
<p>
Overwrites the english Active Record error messages with localized ones
from the language file. If the user submits an invalid form these error
messages and the human attribute names of the corresponding model are used
to generate the shown error box detailing why the record is invalid.
</p>
<h3>Localized Active Record helpers (localized_active_record_helpers)</h3>
<p>
File: <tt>lib/features/localized_active_record_helpers.rb</tt>
</p>
<p>
Provides a more localized version of the <tt>error_messages_for</tt>
helper. Uses the language file to generate the explaination paragraph of
the error box. Makes it also possible to redefine the generated HTML output
using an associated block.
</p>
<h3>Localized <a href="../classes/Date.html">Date</a> and <a href="../classes/Time.html">Time</a> classes (localized_date_and_time)</h3>
<p>
File: <tt>lib/features/localized_date_and_time.rb</tt>
</p>
<p>
Localizes the <a href="../classes/Time.html">Time</a> and <a
href="../classes/Date.html">Date</a> classes. Updates the month and day
name constants of the <a href="../classes/Date.html">Date</a> class with
proper localized ones from the language file. Also makes the <a
href="../classes/Time.html#M000002">Time#strftime</a> method using these
month and day names (based on the work of <a
href="http://poocs.net/articles/2005/10/04/localization-for-rubys-time-strftime">work</a>
of Patrick Lenz).
</p>
<p>
The date and time formats used by the <tt>to_formatted_s</tt> method are
updated, too.
</p>
<h3>Localized array extensions (localized_array)</h3>
<p>
File: <tt>lib/features/localized_array.rb</tt>
</p>
<p>
Localizes the <a href="../classes/Array.html#M000003">Array#to_sentence</a>
method.
</p>
<h3>Localized date helpers (localized_date_helpers)</h3>
<p>
File: <tt>lib/features/localized_date_helpers.rb</tt>
</p>
<p>
Localizes the <tt>date_select</tt> and <tt>distance_of_time_in_words</tt>
helpers.
</p>
<h3>Localized country names (localized_form_options_helpers)</h3>
<p>
File: <tt>lib/features/localized_form_options_helpers.rb</tt>
</p>
<p>
Updates the country names used by the FormOptionsHelper module with
localized names.
</p>
<h3>Localized number helpers (localized_number_helpers)</h3>
<p>
File: <tt>lib/features/localized_number_helpers.rb</tt>
</p>
<p>
Modifies the number helpers of Rails to use a localized seperator,
delimiter, percision and unit.
</p>
<h3>Class based Action View field_error_proc (class_based_field_error_proc)</h3>
<p>
File: <tt>lib/features/class_based_field_error_proc.rb</tt>
</p>
<p>
This feature replaces the default ActionView field_error_proc which is
responsible for formating form fields with invalid input. The original one
wraps invalid form fields into and <tt>div</tt> element of the class
<tt>fieldWithErrors</tt>.
</p>
<pre>
  &lt;div class=&quot;fieldWithErrors&quot;&gt;&lt;input type=&quot;text&quot; class=&quot;txt&quot; ... /&gt;&lt;/div&gt;
</pre>
<p>
The new one just adds the class <tt>invalid</tt> to the corresponding form
field element.
</p>
<pre>
  &lt;input type=&quot;text&quot; class=&quot;txt invalid&quot; ... /&gt;
</pre>
<p>
This feature is based on a code snippet of Duane Johnson found in the Rails
<a
href="http://wiki.rubyonrails.com/rails/pages/HowtoChangeValidationErrorDisplay">wiki</a>.
</p>
<p>
It isn&#8217;t really a localization feature. However while working with
the Active Record error messages the new div-element around invalid fields
was for me one of the most annoying things of Rails. So this feature can my
be considered as &quot;a goody&quot;. :)
</p>
<h2>Extending the plugin with your language</h2>
<p>
It&#8217;s very easy to define new languages for this plugin. All language
specific strings can be found in the language files. One YAML file (and
optional Ruby file) for each language. You can use the german language
files <tt>languages/de.yml</tt> and <tt>languages/de.rb</tt> as a reference
to build files for your own language.
</p>
<p>
For example if you want to create a france language file you could just
copy <tt>de.yml</tt> to <tt>fr.yml</tt> and relpace the necessary strings.
If you need to do some other Ruby stuff like configuring the Rails
Inflector you can create a <tt>fr.rb</tt> file and write usual Ruby code.
This file is loaded right after the language file.
</p>
<h2>License</h2>
<p>
Copyright &#169; 2006 Stephan Soller &lt;stephan.soller@addcom.de&gt;
</p>
<p>
The MIT License
</p>
<p>
Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
&quot;Software&quot;), to deal in the Software without restriction,
including without limitation the rights to use, copy, modify, merge,
publish, distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to the
following conditions:
</p>
<p>
The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
</p>
<p>
THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
USE OR OTHER DEALINGS IN THE SOFTWARE.
</p>

    </div>


   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>